LIBS = -L./lib -lDrawing
CPPFLAGS = -Wall -Winline -pipe -ffast-math -D_LINUX_64_ 

SHAREDFLAGS =  -fPIC -shared

LDFLAGS = -I. -I./include/
INCFLAGS = -I. -I./include/
LDFLAGS+= -Wl,-rpath=./lib/

GCC = g++

OBJDIR = src
TESTDIR = test
BINDIR = bin
LIBDIR = lib


TARGET1 = $(addprefix $(BINDIR)/, test_draw)

COREOBJ = \
		Drawing.o \

#OBJ1 = $(addprefix $(OBJDIR)/, $(COREOBJ))
OBJ1 = $(addprefix $(TESTDIR)/, main.cpp)

LIB1 = $(patsubst %.o,%.so, $(COREOBJ))
LIB1_1 = $(addprefix $(LIBDIR)/lib, $(LIB1))

all: $(TARGET1)
	@echo "--end-makefile--"

$(TARGET1) : $(OBJ1) $(LIB1_1)
	mkdir -p ./bin
	$(GCC) $^ -o $@ $(LIBS) $(LDFLAGS)

$(LIB1_1) : $(OBJDIR)/Drawing.cpp
	mkdir -p ./lib
	$(GCC) $< -o $@  $(SHAREDFLAGS) $(LDFLAGS) 

clean:
	rm -rf ./bin
	rm -rf ./lib
